///<reference types = "cypress"/>

//const cypress = require("cypress")

describe('First Test suite', () => {

    it('Test case 1', () => {
      cy.visit('https://rahulshettyacademy.com/AutomationPractice/#/')

      //checkbox
      cy.get('input#checkBoxOption2').check().should('be.checked').and('have.value','option2')
      cy.get('input#checkBoxOption2').uncheck().should('not.be.checked')
      cy.get('input[type="checkbox"]').check(['option1','option2']);
      
      //Static dropdown using select tagline
      cy.get('select#dropdown-class-example').select('option2')
      cy.get('select').select('option1').should('have.value','option1')

      //dynamic dropdown
      cy.get('input#autocomplete').type('Ni')

      cy.get('.ui-menu-item div').each(($e1, index, $list) => {
        if($e1.text()==="Nigeria")
          {
            cy.wrap($e1).click()
          }
          
      });

      //Visible and invisible elements
      cy.get('#displayed-text').should('be.visible')
      cy.get('#hide-textbox').click()
      cy.get('#displayed-text').should('not.be.visible')
      cy.get('#show-textbox').click()
      cy.get('#show-textbox').should('be.visible')
        
      //Radio button
      cy.get('[value="radio2"]').check().should('be.checked')    

      //alert
      cy.get('#alertbtn').click()

      cy.on('window:alert',(str) => 
        {
          expect(str).to.equal('Hello , share this practice page and share your knowledge')
        })
      cy.get('[value="Confirm"]').click()

      //Pop-ups - Cypress auto accepts pop ups
      

        cy.on('window:confirm',(str) => 
        {
          expect(str).to.equal('Hello , Are you sure you want to confirm?')
        })
      
      // redirect to another page // Switch tabs and perform action in the new tab
      /*
        cy.get('#opentab').invoke('removeAttr', 'target').click()

      cy.origin('https://www.qaclickacademy.com/', () => 
      {
        cy.get('#navbarSupportedContent a[href="about.html"]').click();
        cy.get('.col-lg-5 h2').should('contain', 'QAClick Academy')
        cy.get('.mt-50 h2').should('contain', 'QAClick Academy')
        cy.contains('Welcome to QAClick Academy ')

      })
        */

      /*cy.get('tr td:nth-child(2)').each(($e1, index, $list) => {
 
        const text=$e1.text()
        if(text.includes("Python"))
        {
     
            cy.get("tr td:nth-child(2)").eq(index).next().then(function(price)
            {
             const priceText=   price.text()
             expect(priceText).to.equal('26')
            })
        }
     
    }) */
     
     
    
    // Handling Web tables with Cypress using each command
    cy.get('tr td:nth-child(2)').each(($1, index, $list) => {
      const text=$1.text()
      if(text.includes("Bugzilla")) 
        {
          cy.get('tr td:nth-child(2)').eq(index).next().then(function(price) 
        {
          const priceText = price.text()
          expect(priceText).to.equal('25')
        })
        }



    })
     
     
    // Handling mouse over pop ups
       cy.get('div.mouse-hover-content').invoke('show')
       cy.contains('Top').click()
       cy.url().should('include','top')

       // Handle invisible elements 
       cy.contains('Reload').click({force:true})

       cy.get('opentab').then(function(el)
       {
        const url =el.prop('href')
        cy.visit(url)
        cy.origin(url,()=>
          {
            cy.get("div.sub-menu-bar a[href='about']").click()
          })

       })
       
        

       


    })
         
  })